# Glicko-Trueskill Fusion

## Описание

Эта система реализует гибридную рейтинговую модель, сочетающую математическую строгость Glicko-2 с элементами TrueSkill и поддержкой индивидуальной статистики игроков. Поддерживается временной спад неопределённости, доверительные интервалы, командные матчи и расширяемая конфигурация.

## Конфигурация

Все параметры системы вынесены в файл `config.json`:

- `INITIAL_RATING_GLICKO` — начальный рейтинг игрока
- `INITIAL_RD_GLICKO` — начальная неопределённость (RD)
- `INITIAL_VOLATILITY_GLICKO` — начальная волатильность
- `DEFAULT_TAU` — параметр tau для Glicko-2
- `SCALING_FACTOR` — масштабный коэффициент Glicko-2
- `CONVERGENCE_TOLERANCE` — точность итерационного расчёта волатильности
- `MIN_RD` — минимальное значение RD
- `ELO_OFFSET` — смещение для отображения рейтинга в привычной шкале
- `TEAM_VARIANCE_WEIGHT` — вес влияния дисперсии рейтинга команды противника
- `STAT_CONTRIBUTION_WEIGHT` — вес влияния индивидуальной статистики
- `STAT_CONTRIBUTION_ALPHA` — коэффициент для расчёта вклада статистики
- `SECONDS_PER_DAY` — количество секунд в дне (для временного спада)
- `TIME_DECAY_SIGMA_MULTIPLIER` — множитель для временного спада RD

## Формат игрока (Player)

Игрок описывается следующими полями:

- `name` — имя
- `mu` — внутренний рейтинг Glicko-2
- `phi` — неопределённость (RD)
- `sigma` — волатильность
- `stat` — индивидуальная статистика (например, голы)
- `matches` — количество сыгранных матчей
- `last_match_time` — время последнего матча (timestamp)

## Персистентность

Игроки сохраняются и загружаются в формате JSON. Пример:

```json
[
	{
		"name": "Alice",
		"mu": 0.0,
		"phi": 2.014,
		"sigma": 0.06,
		"stat": 10,
		"matches": 5,
		"last_match_time": 1710000000.0
	}
]
```

## Использование

- Все параметры берутся из `config.json`.
- Для обновления рейтингов используйте функцию `update_ratings(team_a, team_b, team_a_score)`.
- Для получения доверительного интервала используйте метод `get_confidence_interval()` у объекта Player.
- Для сохранения и загрузки игроков используйте функции `save_players_to_json` и `load_players_from_json`.

## Логирование

В системе используется стандартный модуль Python `logging` для отслеживания предупреждений и ошибок.

## Визуализация

Для построения графиков используйте внешние библиотеки (например, matplotlib, plotly), используя методы класса Player для получения данных.
